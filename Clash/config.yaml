parsers: # array
  # - reg: ^.*$ åŒ¹é…æ‰€æœ‰è®¢é˜…ï¼Œæˆ–  - url: https://example.com/profile.yaml æŒ‡å®šè®¢é˜…
  - reg: ^.*$
  # åˆ é™¤æœåŠ¡å•†æä¾›çš„ç­–ç•¥ç»„å’Œè§„åˆ™
    code: |
      module.exports.parse = (raw, { yaml }) => {
        const rawObj = yaml.parse(raw)
        const groups = []
        const rules = []
        return yaml.stringify({ ...rawObj, 'proxy-groups': groups, rules })
      } 

  # å»ºç«‹è‡ªå·±çš„é…ç½®
    yaml:

      append-proxies:
        - name: ğŸ¶ UNM
          type: ss
          server: 101.132.192.21
          port: 30000
          cipher: aes-128-gcm
          password: desperadoj.com
          tfo: false
          udp: false
       
        - name: â˜ï¸ warp+
          type: wireguard
          server: 162.157.193.8 #aka peer endpoint
          port: 2408 #aka peer endpoint port
          ip: 172.16.4.2 #aka self ip address or address
          ipv6: 2606:4700:110:8fd9:33fe:475c:e32b:6c65 #aka self ipv6 address or address (optional) 
          private-key: #aka private-key
          public-key: #aka public-key
          # preshared-key: Zdp+B8+iGb/zmIEMxx32pDQohGiNF8Kvhm4t1Hpgmag=
          dns: [8.8.4.4, 2606:4700:4700::1111] # optional
          mtu: 1280 # optional
          udp: true
          reserved: [233,116,70] # optional
          keepalive: 45 # optional
          # underlying-proxy: # optional
          # type: trojan
          # server: your-underlying-proxy
          # port: 443
          # password: your-password

      prepend-proxy-groups: # å»ºç«‹ç­–ç•¥ç»„
        - name: ğŸ Proxy mode
          type: select
          proxies:
            - ğŸ’Š GFWlist # é»‘åå•æ¨¡å¼ï¼Œæ„ä¸ºã€Œåªæœ‰å‘½ä¸­è§„åˆ™çš„ç½‘ç»œæµé‡ï¼Œæ‰ä½¿ç”¨ä»£ç†ã€
            - ğŸ©¹ Whitelist # ç™½åå•æ¨¡å¼ï¼Œæ„ä¸ºã€Œæ²¡æœ‰å‘½ä¸­è§„åˆ™çš„ç½‘ç»œæµé‡ï¼Œç»Ÿç»Ÿä½¿ç”¨ä»£ç†ã€
        
        - name: ğŸš€ PROXY
          type: select

        - name: ğŸ® Steam 
          type: select
          proxies: &M
            - ğŸ¯ DIRECT
            - ğŸš€ PROXY
            - â™»ï¸ Auto
            - âš–ï¸ Balance
            - ğŸ› ï¸ Failover
            - â˜ï¸ warp+
            - HK é¦™æ¸¯
            - TW å°æ¹¾ 
            - US ç¾å›½ 
            - JP æ—¥æœ¬ 
            - SG ç‹®åŸ
         
        - name: ğŸ» BiliBili 
          type: select
          proxies:
            - ğŸ¯ DIRECT
            - HK é¦™æ¸¯
            - TW å°æ¹¾ 

        - name: ğŸ· Youtube
          type: select
          proxies:
            *M

        - name: ğŸµ UnblockMusic
          type: select
          url: apm3.music.163.com
          proxies:
            - ğŸ¯ DIRECT
            - ğŸ¶ UNM

        - name: âš›ï¸ GitHub
          type: select
          proxies:
            *M

        - name: ğŸ“² Telegram 
          type: select
          proxies:
            *M

        - name: ğŸ¤– OpenAI 
          type: select
          proxies:
            *M

        - name: âœ¨ Google 
          type: select
          proxies: 
            *M

        - name: â“‚ï¸ Microsoft 
          type: select
          proxies:
            *M

        - name: ğŸ Apple
          type: select
          proxies:
            *M

        - name: HK é¦™æ¸¯ 
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
          tolerance: 30

        - name: TW å°æ¹¾ 
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
          tolerance: 30

        - name: US ç¾å›½ 
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
          tolerance: 30

        - name: JP æ—¥æœ¬ 
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
          tolerance: 30

        - name: SG ç‹®åŸ 
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
          tolerance: 30

        - name: ğŸ’Š GFWlist
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - ğŸ¯ DIRECT
            
        - name: ğŸ©¹ Whitelist
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - ğŸš€ PROXY

        - name: ğŸ¯ DIRECT
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - DIRECT

        - name: â™»ï¸ Auto 
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 300
          tolerance: 30

        - name: âš–ï¸ Balance
          type: load-balance
          url: http://www.gstatic.com/generate_204
          interval: 300
          tolerance: 30

        - name: ğŸ› ï¸ Failover 
          type: fallback
          url: http://www.gstatic.com/generate_204
          interval: 300
          tolerance: 30
          
      # ç­–ç•¥ç»„ç¤ºä¾‹
       # - name: åˆ†ç»„å
         # type: select       # æ‰‹åŠ¨é€‰ç‚¹   
               # url-test     # è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹
               # fallback     # èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€ä¸ª
               # laod-balance # å‡è¡¡ä½¿ç”¨åˆ†ç»„å†…çš„èŠ‚ç‚¹
         # url: http://www.gstatic.com/generate_204 # æµ‹è¯•åœ°å€ éselectç±»å‹åˆ†ç»„å¿…è¦
         # interval: 300 # è‡ªåŠ¨æµ‹è¯•é—´éš”æ—¶é—´ï¼Œå•ä½ç§’ éselectç±»å‹åˆ†ç»„å¿…è¦
         # tolerance: 50 # å…è®¸çš„åå·®ï¼ŒèŠ‚ç‚¹ä¹‹é—´å»¶è¿Ÿå·®å°äºè¯¥å€¼ä¸åˆ‡æ¢ éå¿…è¦
         # proxies:  
           # - èŠ‚ç‚¹åç§°æˆ–å…¶ä»–åˆ†ç»„å¥—å¨ƒ
          
      commands:
        - proxy-groups.ğŸš€ PROXY.proxies=[]proxyNames|^((?!UNM|å®˜ç½‘|å¥—é¤|æµé‡|warp).)*$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.ğŸš€ PROXY.proxies.0+â™»ï¸ Auto # å‘æŒ‡å®šåˆ†ç»„æ·»åŠ ä¸€ä¸ª â™»ï¸ Auto èŠ‚ç‚¹å
        - proxy-groups.ğŸš€ PROXY.proxies.1+âš–ï¸ Balance # å‘æŒ‡å®šåˆ†ç»„æ·»åŠ ä¸€ä¸ª âš–ï¸ Balance èŠ‚ç‚¹å
        - proxy-groups.ğŸš€ PROXY.proxies.2+ğŸ› ï¸ Failover # å‘æŒ‡å®šåˆ†ç»„æ·»åŠ ä¸€ä¸ª ğŸ› ï¸ Failover èŠ‚ç‚¹å
        - proxy-groups.ğŸš€ PROXY.proxies.3+â˜ï¸ warp+ # å‘æŒ‡å®šåˆ†ç»„æ·»åŠ ä¸€ä¸ª â˜ï¸ warp+ èŠ‚ç‚¹å
        - proxy-groups.â™»ï¸ Auto.proxies=[]proxyNames|^((?!UNM|å®˜ç½‘|å¥—é¤|æµé‡).)*$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.âš–ï¸ Balance.proxies=[]proxyNames|^((?!UNM|å®˜ç½‘|å¥—é¤|æµé‡).)*$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.ğŸ› ï¸ Failover.proxies=[]proxyNames|^((?!UNM|å®˜ç½‘|å¥—é¤|æµé‡).)*$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.HK é¦™æ¸¯.proxies=[]proxyNames|^(.*)(é¦™æ¸¯|Hong Kong)+(.*)$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.TW å°æ¹¾.proxies=[]proxyNames|^(.*)(å°æ¹¾|Taiwan)+(.*)$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.US ç¾å›½.proxies=[]proxyNames|^(.*)(ç¾å›½|United States)+(.*)$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.JP æ—¥æœ¬.proxies=[]proxyNames|^(.*)(æ—¥æœ¬|Japan)+(.*)$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.KR éŸ©å›½.proxies=[]proxyNames|^(.*)(éŸ©å›½|Korea)+(.*)$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.SG ç‹®åŸ.proxies=[]proxyNames|^(.*)(æ–°åŠ å¡|Singapore)+(.*)$ # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        
        # ä¸€äº›å¯èƒ½ç”¨åˆ°çš„æ­£åˆ™è¿‡æ»¤èŠ‚ç‚¹ç¤ºä¾‹ï¼Œä½¿åˆ†ç»„æ›´ç»†è‡´
        # []proxyNames|a                         # åŒ…å«a
        # []proxyNames|^(.*)(a|b)+(.*)$          # åŒ…å«aæˆ–b
        # []proxyNames|^(?=.*a)(?=.*b).*$        # åŒ…å«aå’Œb
        # []proxyNames|^((?!b).)*a((?!b).)*$     # åŒ…å«aä¸”ä¸åŒ…å«b
        # []proxyNames|^((?!b|c).)*a((?!b|c).)*$ # åŒ…å«aä¸”ä¸åŒ…å«bæˆ–c

      prepend-rules: # è§„åˆ™ç”±ä¸Šå¾€ä¸‹éå†ï¼Œå¦‚ä¸Šé¢è§„åˆ™å·²ç»å‘½ä¸­ï¼Œåˆ™ä¸å†å¾€ä¸‹å¤„ç†
        #è§„åˆ™é›†

        - RULE-SET,NetEaseMusic,ğŸµ UnblockMusic
        - RULE-SET,Steam,ğŸ® Steam
        - RULE-SET,GitHub,âš›ï¸ GitHub
        - RULE-SET,Apple,ğŸ Apple
        - RULE-SET,Youtube,ğŸ· Youtube
        - RULE-SET,OpenAI,ğŸ¤– OpenAI 
        - RULE-SET,BiliBili,ğŸ» BiliBili
        - RULE-SET,telegramcidr,ğŸ“² Telegram,no-resolve
        - RULE-SET,Microsoft,â“‚ï¸ Microsoft
        - RULE-SET,Google,âœ¨ Google
        - RULE-SET,applications,ğŸ¯ DIRECT
        - RULE-SET,private,ğŸ¯ DIRECT
        - RULE-SET,lancidr,ğŸ¯ DIRECT,no-resolve
        - RULE-SET,cncidr,ğŸ¯ DIRECT,no-resolve
        - RULE-SET,tld-not-cn,ğŸš€ PROXY
        - RULE-SET,gfw,ğŸš€ PROXY
        - RULE-SET,greatfire,ğŸš€ PROXY
        - GEOIP,CN,ğŸ¯ DIRECT,no-resolve
        - RULE-SET,direct,ğŸ¯ DIRECT
        - RULE-SET,proxy,ğŸ Proxy mode
        - MATCH,ğŸ Proxy mode

      mix-rule-providers: # æ·»åŠ è§„åˆ™é›†

          proxy:
            type: http
            behavior: domain
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
            interval: 86400

          direct:
            type: http
            behavior: domain
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
            interval: 86400

          private:
            type: http
            behavior: domain
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
            interval: 86400

          gfw:
            type: http
            behavior: domain
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
            interval: 86400

          greatfire:
            type: http
            behavior: domain
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/greatfire.txt"
            interval: 86400

          tld-not-cn:
            type: http
            behavior: domain
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
            interval: 86400
            
          cncidr:
            type: http
            behavior: ipcidr
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
            interval: 86400

          telegramcidr:
            type: http
            behavior: ipcidr
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
            interval: 86400

          lancidr:
            type: http
            behavior: ipcidr
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
            interval: 86400

          applications:
            type: http
            behavior: classical
            url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
            interval: 86400

          Microsoft:
            type: http
            behavior: classical
            url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml"
            interval: 86400
            
          Google:
            type: http
            behavior: classical
            url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml"
            interval: 86400

          Apple:
            type: http
            behavior: classical
            url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple.yaml"
            interval: 86400

          OpenAI:
            type: http
            behavior: classical
            url: "https://raw.githubusercontent.com/Coldvvater/Mononoke/master/Stash/RuleSet/OpenAI.yaml"
            interval: 86400

          Youtube:
            type: http
            behavior: classical
            url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml"
            interval: 86400 

          BiliBili:
            type: http
            behavior: classical
            url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BiliBili/BiliBili.yaml"
            interval: 86400

          GitHub:
            type: http
            behavior: classical
            url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GitHub/GitHub.yaml"
            interval: 86400

          Steam:
            type: http
            behavior: classical
            url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml"
            interval: 86400

          NetEaseMusic:
            type: http
            behavior: classical
            url: "https://raw.githubusercontent.com/abrclano/Self-use-Rules/main/RuleSet/NeteaseMusic.yaml"
            interval: 86400

